{"options":{"viewOn":"matches","pipeline":[{"$facet":{"home_team_clean_sheets":[{"$match":{"away_team.goals":{"$eq":{"$numberInt":"0"}}}},{"$project":{"player":{"$filter":{"as":"player","cond":{"$eq":["$$player.position","Goalkeeper"]},"limit":{"$numberInt":"1"},"input":"$home_team_lineup.starting_eleven"}},"country":"$home_team_country","against":"$away_team_country"}},{"$unwind":{"path":"$player"}},{"$project":{"player":"$player.name","country":{"$numberInt":"1"},"against":{"$numberInt":"1"}}}],"away_team_clean_sheets":[{"$match":{"home_team.goals":{"$eq":{"$numberInt":"0"}}}},{"$project":{"player":{"$filter":{"input":"$away_team_lineup.starting_eleven","as":"player","cond":{"$eq":["$$player.position","Goalkeeper"]},"limit":{"$numberInt":"1"}}},"country":"$away_team_country","against":"$home_team_country"}},{"$unwind":{"path":"$player"}},{"$project":{"player":"$player.name","country":{"$numberInt":"1"},"against":{"$numberInt":"1"}}}]}},{"$project":{"events":{"$concatArrays":["$home_team_clean_sheets","$away_team_clean_sheets"]}}},{"$unwind":{"path":"$events"}},{"$replaceRoot":{"newRoot":"$events"}},{"$addFields":{"type_of_event":"clean_sheet"}}]},"indexes":[],"collectionName":"clean_sheets","type":"view"}