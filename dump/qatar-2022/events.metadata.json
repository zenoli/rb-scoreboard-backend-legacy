{"options":{"viewOn":"matches","pipeline":[{"$facet":{"away_team_events":[{"$unwind":{"path":"$away_team_events"}},{"$project":{"event":"$away_team_events","country":"$away_team_country","against":"$home_team_country"}}],"home_team_events":[{"$unwind":{"path":"$home_team_events"}},{"$project":{"event":"$home_team_events","country":"$home_team_country","against":"$away_team_country"}}]}},{"$project":{"events":{"$concatArrays":["$home_team_events","$away_team_events"]}}},{"$unwind":{"path":"$events"}},{"$replaceRoot":{"newRoot":"$events"}},{"$project":{"eventId":"$event.id","type_of_event":"$event.type_of_event","player":"$event.player","time":"$event.time","extra_info":"$event.extra_info","country":{"$numberInt":"1"},"against":{"$numberInt":"1"}}}]},"indexes":[],"collectionName":"events","type":"view"}